{"version":3,"sources":["../source/react time ago.js"],"names":["global_scope","window","global","React_time_ago","props","context","locale","date_time_format","update_interval","intl","Error","_react_time_ago","create_react_time_ago","time_ago","Time_ago","date_time_formatter","Date_time_formatter","nextProps","nextState","tick","register","unregister","children","wrapper","time_style","timeStyle","style","className","full_date","date","Date","time","markup","toISOString","undefined","format","createElement","verbose","input","full","constructor","_register","_unregister","Component","propTypes","string","oneOfType","instanceOf","number","any","func","object","bool","isRequired","defaultProps","weekday","day","month","year","hour","minute","second","contextTypes","start_relative_times_updater","update_relative_times","dry_run","_components","component","forceUpdate","_timer","setTimeout","stop_relative_times_updater","clearTimeout","push","length","remove_element_from_array","_destroy","array","element","index","indexOf","splice","_date_time_formatters","date_time_format_id","Intl","DateTimeFormat","formatter","_time_ago_formatters","parse_time_ago_style","formatter_styles"],"mappings":"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","file":"react time ago.js","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport javascript_time_ago from 'javascript-time-ago'\r\nimport shallow_compare from 'react-addons-shallow-compare'\r\n\r\nconst global_scope = typeof window !== 'undefined' ? window : global\r\n\r\nexport default class React_time_ago extends React.Component\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\tlocale           : PropTypes.string,\r\n\t\tchildren         : PropTypes.oneOfType([PropTypes.instanceOf(Date), PropTypes.number]),\r\n\t\t// `javascript-time-ago` relative time formatting style\r\n\t\ttime_style       : PropTypes.any,\r\n\t\ttimeStyle        : PropTypes.any,\r\n\t\t// (optional) Tooltip date formatter\r\n\t\tfull             : PropTypes.func,\r\n\t\t// Intl.DateTimeFormat options\r\n\t\tdate_time_format : PropTypes.object,\r\n\t\tupdate_interval  : PropTypes.number,\r\n\t\twrapper          : PropTypes.func,\r\n\t\ttick             : PropTypes.bool.isRequired,\r\n\t\tstyle            : PropTypes.object,\r\n\t\tclassName        : PropTypes.string\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\t// Thursday, December 20, 2012, 7:00:00 AM GMT+4\r\n\t\tdate_time_format:\r\n\t\t{\r\n\t\t\tweekday      : 'long',\r\n\t\t\tday          : 'numeric',\r\n\t\t\tmonth        : 'long',\r\n\t\t\tyear         : 'numeric',\r\n\t\t\thour         : 'numeric',\r\n\t\t\tminute       : '2-digit',\r\n\t\t\tsecond       : '2-digit',\r\n\t\t\t// timeZoneName : 'short'\r\n\t\t},\r\n\r\n\t\t// Updates once a minute\r\n\t\tupdate_interval: 60 * 1000,\r\n\r\n\t\ttick: true\r\n\t}\r\n\r\n\tstatic contextTypes =\r\n\t{\r\n\t\tintl: PropTypes.object\r\n\t}\r\n\r\n\tconstructor(props, context)\r\n\t{\r\n\t\tsuper(props, context)\r\n\r\n\t\tlet { locale, date_time_format, update_interval } = props\r\n\r\n\t\t// If `locale` was not explicitly set\r\n\t\t// then try to derive it from `react-intl` context\r\n\t\tif (!locale)\r\n\t\t{\r\n\t\t\t// supports `react-intl`\r\n\t\t\tif (context.intl)\r\n\t\t\t{\r\n\t\t\t\tlocale = context.intl.locale\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// If no locale is set, then throw an error\r\n\t\tif (!locale)\r\n\t\t{\r\n\t\t\tthrow new Error(`No locale specified for react-time-ago`)\r\n\t\t}\r\n\r\n\t\t// `_react_time_ago` holds cached formatters\r\n\t\t// and the global refresh timer\r\n\t\tif (!global_scope._react_time_ago)\r\n\t\t{\r\n\t\t\tcreate_react_time_ago(update_interval)\r\n\t\t}\r\n\r\n\t\t// Take `javascript-time-ago` formatter and \r\n\t\t// `Intl.DateTimeFormat` verbose formatter from cache\r\n\t\tthis.time_ago            = new Time_ago(locale)\r\n\t\tthis.date_time_formatter = new Date_time_formatter(locale, date_time_format)\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState)\r\n\t{\r\n\t\treturn shallow_compare(this, nextProps, nextState)\r\n\t}\r\n\r\n\tcomponentDidMount()\r\n\t{\r\n\t\tconst { tick } = this.props\r\n\r\n\t\tif (tick)\r\n\t\t{\r\n\t\t\tthis.register()\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount()\r\n\t{\r\n\t\tconst { tick } = this.props\r\n\t\t\r\n\t\tif (tick)\r\n\t\t{\r\n\t\t\tthis.unregister()\r\n\t\t}\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tchildren,\r\n\t\t\twrapper,\r\n\t\t\ttime_style,\r\n\t\t\ttimeStyle,\r\n\t\t\tstyle,\r\n\t\t\tclassName\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tif (!children)\r\n\t\t{\r\n\t\t\tthrow new Error(`You are required to specify either a timestamp (in milliseconds) or Date as a child of react-time-ago component`)\r\n\t\t}\r\n\r\n\t\tconst full_date = this.full_date(children)\r\n\r\n\t\tconst date = children instanceof Date && children\r\n\t\tconst time = typeof children === 'number' && children\r\n\r\n\t\tconst markup =\r\n\t\t(\r\n\t\t\t<time\r\n\t\t\t\tdateTime={(date || new Date(time)).toISOString()}\r\n\t\t\t\ttitle={wrapper ? undefined : full_date} \r\n\t\t\t\tstyle={style} \r\n\t\t\t\tclassName={className}>\r\n\r\n\t\t\t\t{this.time_ago.format(time || date, time_style || timeStyle)}\r\n\t\t\t</time>\r\n\t\t)\r\n\r\n\t\tif (wrapper)\r\n\t\t{\r\n\t\t\treturn React.createElement(wrapper, { verbose: full_date }, markup)\r\n\t\t}\r\n\r\n\t\treturn markup\r\n\t}\r\n\r\n\t// Verbose date string.\r\n\t// Is used as a tooltip text.\r\n\t//\r\n\t// E.g. \"Sunday, May 18th, 2012, 18:45\"\r\n\t//\r\n\tfull_date(input)\r\n\t{\r\n\t\tif (this.props.full)\r\n\t\t{\r\n\t\t\treturn this.props.full(input)\r\n\t\t}\r\n\r\n\t\tlet date\r\n\r\n\t\tif (input.constructor === Date)\r\n\t\t{\r\n\t\t\tdate = input\r\n\t\t}\r\n\t\telse if (typeof input === 'number')\r\n\t\t{\r\n\t\t\tdate = new Date(input)\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthrow new Error(`Unsupported react-time-ago input: ${typeof input}, ${input}`)\r\n\t\t}\r\n\r\n\t\treturn this.date_time_formatter.format(date)\r\n\t}\r\n\r\n\tregister()\r\n\t{\r\n\t\tglobal_scope._react_time_ago._register(this)\r\n\t}\r\n\r\n\tunregister()\r\n\t{\r\n\t\tglobal_scope._react_time_ago._unregister(this)\r\n\t}\r\n}\r\n\r\nfunction start_relative_times_updater(update_interval)\r\n{\r\n\tfunction update_relative_times(dry_run)\r\n\t{\r\n\t\tif (!dry_run)\r\n\t\t{\r\n\t\t\tfor (let component of global_scope._react_time_ago._components)\r\n\t\t\t{\r\n\t\t\t\tcomponent.forceUpdate()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tglobal_scope._react_time_ago._timer = setTimeout(update_relative_times, update_interval)\r\n\t}\r\n\r\n\tupdate_relative_times(true)\r\n}\r\n\r\nfunction stop_relative_times_updater()\r\n{\r\n\tif (global_scope._react_time_ago._timer)\r\n\t{\r\n\t\tclearTimeout(global_scope._react_time_ago._timer)\r\n\t\tglobal_scope._react_time_ago._timer = undefined\r\n\t}\r\n}\r\n\r\nfunction create_react_time_ago(update_interval)\r\n{\r\n\tconst _react_time_ago =\r\n\t{\r\n\t\t_components : [],\r\n\t\t_register(component)\r\n\t\t{\r\n\t\t\tthis._components.push(component)\r\n\r\n\t\t\t// If it's the first relative time component,\r\n\t\t\t// start periodical time refresh.\r\n\t\t\tif (this._components.length === 1)\r\n\t\t\t{\r\n\t\t\t\tstart_relative_times_updater(update_interval)\r\n\t\t\t}\r\n\t\t},\r\n\t\t_unregister(component)\r\n\t\t{\r\n\t\t\tremove_element_from_array(this._components, component)\r\n\r\n\t\t\t// If it was the last relative time component,\r\n\t\t\t// stop periodical time refresh.\r\n\t\t\tif (this._components.length === 0)\r\n\t\t\t{\r\n\t\t\t\tstop_relative_times_updater()\r\n\t\t\t}\r\n\t\t},\r\n\t\t_destroy()\r\n\t\t{\r\n\t\t\tfor (let component of this._components)\r\n\t\t\t{\r\n\t\t\t\tthis._unregister(component)\r\n\t\t\t}\r\n\r\n\t\t\tdelete global_scope._react_time_ago\r\n\t\t}\r\n\t}\r\n\r\n\tglobal_scope._react_time_ago = _react_time_ago\r\n}\r\n\r\nfunction remove_element_from_array(array, element)\r\n{\r\n\tconst index = array.indexOf(element)\r\n\tif (index >= 0)\r\n\t{\r\n\t\tarray.splice(index, 1)\r\n\t}\r\n\treturn array\r\n}\r\n\r\nexport class Date_time_formatter\r\n{\r\n\tconstructor(locale, date_time_format = React_time_ago.defaultProps.date_time_format)\r\n\t{\r\n\t\t// Formatters\r\n\t\tif (!global_scope._date_time_formatters)\r\n\t\t{\r\n\t\t\tglobal_scope._date_time_formatters = {}\r\n\t\t}\r\n\r\n\t\t// Formatters for this locale\r\n\t\tif (!global_scope._date_time_formatters[locale])\r\n\t\t{\r\n\t\t\tglobal_scope._date_time_formatters[locale] = {}\r\n\t\t}\r\n\r\n\t\t// `Intl.DateTimeFormat` format caching key\r\n\t\tconst date_time_format_id = JSON.stringify(date_time_format)\r\n\r\n\t\t// Cache `Intl.DateTimeFormat` for this locale\r\n\t\tif (!global_scope._date_time_formatters[locale][date_time_format_id])\r\n\t\t{\r\n\t\t\tglobal_scope._date_time_formatters[locale][date_time_format_id] = new Intl.DateTimeFormat(locale, date_time_format)\r\n\t\t}\r\n\r\n\t\tthis.formatter = global_scope._date_time_formatters[locale][date_time_format_id]\r\n\t}\r\n\r\n\tformat(date)\r\n\t{\r\n\t\treturn this.formatter.format(date)\r\n\t}\r\n}\r\n\r\nexport class Time_ago\r\n{\r\n\tconstructor(locale)\r\n\t{\r\n\t\t// Formatters\r\n\t\tif (!global_scope._time_ago_formatters)\r\n\t\t{\r\n\t\t\tglobal_scope._time_ago_formatters = {}\r\n\t\t}\r\n\r\n\t\t// Cache `javascript-time-ago` formatter for this locale\r\n\t\tif (!global_scope._time_ago_formatters[locale])\r\n\t\t{\r\n\t\t\tglobal_scope._time_ago_formatters[locale] = new javascript_time_ago(locale)\r\n\t\t}\r\n\r\n\t\tthis.formatter = global_scope._time_ago_formatters[locale]\r\n\t}\r\n\r\n\tformat(date, time_style)\r\n\t{\r\n\t\treturn this.formatter.format(date, this.parse_time_ago_style(time_style))\r\n\t}\r\n\r\n\tparse_time_ago_style(time_style)\r\n\t{\r\n\t\tif (!time_style)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (typeof time_style === 'string')\r\n\t\t{\r\n\t\t\tif (!this.formatter_styles[time_style])\r\n\t\t\t{\r\n\t\t\t\tthis.formatter_styles[time_style] = this.formatter.style[time_style]()\r\n\t\t\t}\r\n\r\n\t\t\treturn this.formatter_styles[time_style]\r\n\t\t}\r\n\t\telse if (typeof time_style === 'object')\r\n\t\t{\r\n\t\t\treturn time_style\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthrow new Error(`Unknown time formatter style: ${time_style}`)\r\n\t\t}\r\n\t}\r\n}"]}